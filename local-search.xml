<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Nexus 私服搭建</title>
    <link href="/2022/01/03/java/nexus/"/>
    <url>/2022/01/03/java/nexus/</url>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><blockquote><p>企业内部为了方便统一管理依赖而搭建的 web 服务器</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_002.jpg" alt="maven 仓库的架构图"></p><p>常用构建技术：Apache Archiva JFrog Artifactory <font color="red">Sonatype Nexus</font></p><h2 id="搭建步骤"><a href="#搭建步骤" class="headerlink" title="搭建步骤"></a>搭建步骤</h2><h3 id="下载软件包"><a href="#下载软件包" class="headerlink" title="下载软件包"></a>下载软件包</h3><p><a href="https://www.sonatype.com/">官网地址</a></p><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_003.jpg" alt="不同版本的安装包"></p><h3 id="解压并运行"><a href="#解压并运行" class="headerlink" title="解压并运行"></a>解压并运行</h3><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_004.jpg" alt="解压后的文件夹"></p><p>切换到 nexus-3.19.1-01 的 bin 目录下：</p><p>mac/linux:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./nexus run<br></code></pre></td></tr></table></figure><p>windows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nexus /run<br></code></pre></td></tr></table></figure><p>nexus 默认端口号 <code>8081</code><br>新建仓库需登录后方可操作，默认账号 <code>admin</code>，密码存放路径 <code>/sonatype-work/nexus3/admin.password</code><br>登录成功后可以修改密码</p><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_005.jpg" alt="nexus首页"></p><h2 id="Nexus-内置仓库"><a href="#Nexus-内置仓库" class="headerlink" title="Nexus 内置仓库"></a>Nexus 内置仓库</h2><ul><li>proxy: 用来代理远程仓库，是我们远程人仓库和本地仓库中间的私有仓库</li><li>group: 对我们的仓库进行分组管理</li><li>hosted：用于发布我们本地开发的项目，将项目发布到 hosted 仓库后再进行相关的部署工作<ul><li>release：用于发布稳定版本软件</li><li>snapshot: 用于发布快照版本软件  </li></ul></li></ul><p>发布版本的 release 和 snapshot 对应 pom 文件中的 version 信息</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 快照版本 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 稳定版本--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0-RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_006.jpg" alt="nexus内置仓库"></p><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><blockquote><p>我们主要使用 maven2 的三种类型仓库</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_007.jpg" alt="maven2仓库"></p><ol><li>创建一个针对中央仓库的私有仓库：my_nexus</li></ol><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_008.jpg" alt="my_nexus代理中央仓库"></p><ol start="2"><li>创建一个发布仓库：release 版本</li></ol><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_012.jpg" alt="release版本"></p><ol start="3"><li>创建一个快照版本仓库：snapshot 版本</li></ol><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_010.jpg" alt="snapshot版本"></p><h2 id="仓库的使用"><a href="#仓库的使用" class="headerlink" title="仓库的使用"></a>仓库的使用</h2><blockquote><p>maven 项目中依赖的查找顺序 本地仓库 -&gt; 私有仓库 -&gt; 中央仓库</p></blockquote><ol><li>添加私有仓库到 maven 项目中</li></ol><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_011.jpg" alt="拷贝仓库地址"></p><p>pom.xml 文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">repositories</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 配置私有仓库 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>my nexus<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>My Nexus<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/my_nexus/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">releases</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">releases</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">snapshots</span>&gt;</span> <br>      <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">snapshots</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">repositories</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>配置发布版本仓库：release 版本 &amp; snapshot 版本</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>my release<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>My Release<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/my_realease/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>my snapshot<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>My Snapshot<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/my_snapshot/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span><br></code></pre></td></tr></table></figure><p>项目发布不同版本，查看依赖上传的仓库</p><p><img src="https://cdn.jsdelivr.net/gh/fengjian2705/cdn/img/nexus_013.jpg" alt="发布项目"></p><p><font color="red">发布提示 401，依赖上传仓库需要登录 </font>  </p><p>解决方法：  </p><p>在 maven 的 setting.xml 中设置登录 <code>Nexus</code> 的用户名和密码即可</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servers</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>my release<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>admin123<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>my snapshot<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>admin123<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servers</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>完</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>文件编码</title>
    <link href="/2022/01/03/java/%E7%BC%96%E7%A0%81/"/>
    <url>/2022/01/03/java/%E7%BC%96%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<h2 id="gbk"><a href="#gbk" class="headerlink" title="gbk"></a>gbk</h2><p>gbk 编码中文占用2个字节，英文占用1个字节</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnsupportedEncodingException </span>&#123;<br>        String s = <span class="hljs-string">&quot;风间ABC&quot;</span>;<br>        <span class="hljs-keyword">byte</span>[] bytes3 = s.getBytes(<span class="hljs-string">&quot;gbk&quot;</span>);<br>        <span class="hljs-comment">// gbk 编码中文占用2个字节，英文占用1个字节</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">byte</span> b : bytes3) &#123;<br>            <span class="hljs-comment">// 把字节（转换成了int）以16进制的方式显示</span><br>            System.out.print(Integer.toHexString(b &amp; <span class="hljs-number">0xff</span>)+<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>提示：&amp; 0xff 保留后8位置（一个字节8位，int占4个字节，展示时前面24位去掉）</p><h2 id="utf-8"><a href="#utf-8" class="headerlink" title="utf-8"></a>utf-8</h2><p>utf-8 编码中文占用3个字节，英文占用1个字节</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnsupportedEncodingException </span>&#123;<br>        String s = <span class="hljs-string">&quot;风间ABC&quot;</span>;<br>        <span class="hljs-keyword">byte</span>[] bytes1 = s.getBytes();<span class="hljs-comment">// 转换成字节序列，用的是项目默认的编码 utf-8</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">byte</span> b : bytes1) &#123;<br>            <span class="hljs-comment">// 把字节（转换成了int）以16进制的方式显示</span><br>            System.out.print(Integer.toHexString(b &amp; <span class="hljs-number">0xff</span>)+<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">byte</span>[] bytes2 = s.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>            <span class="hljs-comment">// utf-8 编码中文占用3个字节，英文占用1个字节</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">byte</span> b : bytes2) &#123;<br>                System.out.print(Integer.toHexString(b &amp; <span class="hljs-number">0xff</span>)+<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>        <br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="utf-16be"><a href="#utf-16be" class="headerlink" title="utf-16be"></a>utf-16be</h2><p>java 是双字节编码 utf-16be，java 中一个字符占两个字节<br>java 一个字符是否可以放一个汉字？可以，gbk编码的汉字</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnsupportedEncodingException </span>&#123;<br>        String s = <span class="hljs-string">&quot;风间ABC&quot;</span>;<br>        <span class="hljs-keyword">byte</span>[] bytes4 = s.getBytes(<span class="hljs-string">&quot;utf-16be&quot;</span>);<br>        <span class="hljs-comment">// utf-16be 中文占两个字节，英文占两个字节</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">byte</span> b : bytes4) &#123;<br>            System.out.print(Integer.toHexString(b &amp; <span class="hljs-number">0xff</span>)+<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="字节序列转字符串"><a href="#字节序列转字符串" class="headerlink" title="字节序列转字符串"></a>字节序列转字符串</h2><p>当你的字节序列是某种编码时，这个时候想把字节序列变成字符串，<br>也需要用这种编码方式，否则会出现乱码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnsupportedEncodingException </span>&#123;<br>        String s = <span class="hljs-string">&quot;风间ABC&quot;</span>;<br>        String str1 = <span class="hljs-keyword">new</span> String(bytes4);<span class="hljs-comment">// 用项目默认的编码</span><br>        System.out.println(str1);<br><br>        String str2 = <span class="hljs-keyword">new</span> String(bytes4, <span class="hljs-string">&quot;utf-16be&quot;</span>);<br>        System.out.println(str2);<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="项目间拷贝文件"><a href="#项目间拷贝文件" class="headerlink" title="项目间拷贝文件"></a>项目间拷贝文件</h2><p>文本文件就是字节序列，可以是任意编码格式<br>eclipse不同项目之间拷贝文件，编码不同会导致乱码，复制内容则会自动转换编码格式<br>​<br><strong>完</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>编码</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
